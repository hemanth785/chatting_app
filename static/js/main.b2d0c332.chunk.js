(this.webpackJsonpchatting_app=this.webpackJsonpchatting_app||[]).push([[0],{18:function(e,t,a){e.exports=a(42)},23:function(e,t,a){},24:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(16),r=a.n(i),c=(a(23),a(17)),o=a(2),l=a(3),u=a(6),h=a(5),d=(a(24),a(4)),p=a.n(d),m="https://chat-server-hk.herokuapp.com/",v=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleSelectedUser=function(t){e.setState({user:t,recipentList:e.state.userData.filter((function(e){return t._id!==e._id})),showSelectUser:!1,showSelectRecipeint:!0})},e.handleSelectedRecipient=function(t){console.log("hello123"),e.setState({recipient:t,showSelectRecipeint:!1,showChatBox:!0})},e.state={userData:[],recipentList:[],user:{},recipient:{},showSelectUser:!0,showSelectRecipeint:!1,showChatBox:!1},e}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=this;p.a.get("".concat(m,"api/users")).then((function(t){var a=t.data.users;e.setState({userData:a,recipentList:a})}))}},{key:"render",value:function(){return s.a.createElement("div",null,this.state.showSelectUser&&s.a.createElement(g,{onSelectUser:this.handleSelectedUser,userData:this.state.userData}),this.state.showSelectRecipeint&&s.a.createElement(S,{onSelectRecipient:this.handleSelectedRecipient,userData:this.state.recipentList}),this.state.showChatBox&&s.a.createElement(f,{user:this.state.user,recipient:this.state.recipient,sender:this.state.recipient}))}}]),a}(s.a.Component),f=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState({inputMessage:e.target.value})},n.handleSendMessage=function(){var e=n.state.inputMessage;if(e){var t={sender:n.state.user_id,recipient:n.state.recipient_id,message:e};p.a.post("".concat(m,"api/conversation"),t).then((function(e){var t=e.data.message;201===e.status&&n.setState((function(e){return{conversation:[].concat(Object(c.a)(e.conversation),[t]),inputMessage:""}}))}))}},n.state={conversation:[],user_id:n.props.user._id,recipient_id:n.props.recipient._id,inputMessage:""},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={user1_id:this.state.user_id,user2_id:this.state.recipient_id};p.a.post("".concat(m,"api/conversation/getConverstions"),t).then((function(t){e.setState({conversation:t.data.conversations})})),this.checkForMessages()}},{key:"checkForMessages",value:function(){var e=this;console.log("called"),setInterval((function(){var t={user1_id:e.state.user_id,user2_id:e.state.recipient_id};p.a.post("".concat(m,"api/conversation/getConverstions"),t).then((function(t){e.setState({conversation:t.data.conversations})}))}),2e3)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chatboxContainer"},s.a.createElement("header",null,this.props.recipient.name),s.a.createElement("div",{className:"conversation"},this.state.conversation.map((function(t,a){return t.sender===e.state.user_id?s.a.createElement("div",{className:"text-bubble userMessage",key:t._id},t.message):s.a.createElement("div",{className:"text-bubble recipientMessage",key:t._id},t.message)}))),s.a.createElement("div",{className:"typeMessage"},s.a.createElement("input",{type:"text",value:this.state.inputMessage,onChange:this.handleInputChange,placeholder:"Type here",id:"textMessage"}),s.a.createElement("button",{id:"sendMessage",onClick:this.handleSendMessage,className:"sendMessage"},"send")))}}]),a}(s.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSelectedUser=function(e){n.props.onSelectUser(e)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"userSelectDiv"},s.a.createElement("header",{className:"subheader"},"select user account"),this.props.userData.map((function(t,a){return s.a.createElement("div",{className:"userCard",userid:t._id,onClick:function(){e.handleSelectedUser(t)},key:a},t.name)}))))}}]),a}(s.a.Component),S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSelectedRecipient=function(e){n.props.onSelectRecipient(e)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"recipientSelectDiv"},s.a.createElement("header",{className:"subheader"},"Send message to:"),this.props.userData.map((function(t,a){return s.a.createElement("div",{className:"userCard",userid:t._id,onClick:function(){e.handleSelectedRecipient(t)},key:a},t.name)}))))}}]),a}(s.a.Component);var b=function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"main-container"},s.a.createElement("header",{className:"text-center"},"Chat app"),s.a.createElement(v,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.b2d0c332.chunk.js.map